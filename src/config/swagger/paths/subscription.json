{
  "/api/subscriptions/plans": {
    "get": {
      "summary": "Get all subscription plans",
      "description": "Retrieve all available subscription plans",
      "tags": ["Subscription"],
      "responses": {
        "200": {
          "description": "Subscription plans retrieved successfully",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "data": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string",
                          "example": "Monthly Plan"
                        },
                        "description": {
                          "type": "string"
                        },
                        "price": {
                          "type": "number",
                          "format": "float",
                          "example": 9.99
                        },
                        "currency": {
                          "type": "string",
                          "example": "USD"
                        },
                        "interval": {
                          "type": "string",
                          "enum": ["MONTHLY", "ANNUAL"]
                        },
                        "features": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "500": {
          "description": "Server error",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        }
      }
    }
  },
  "/api/subscriptions": {
    "get": {
      "summary": "Get user's subscriptions",
      "description": "Retrieve the current user's active subscriptions",
      "tags": ["Subscription"],
      "security": [
        {
          "cookieAuth": []
        }
      ],
      "responses": {
        "200": {
          "description": "Subscriptions retrieved successfully",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "data": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "planId": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["ACTIVE", "CANCELED", "PENDING"]
                        },
                        "startDate": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "endDate": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "autoRenew": {
                          "type": "boolean"
                        },
                        "paymentMethod": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "brand": {
                              "type": "string"
                            },
                            "last4": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "401": {
          "description": "Not authenticated",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "500": {
          "description": "Server error",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        }
      }
    },
    "post": {
      "summary": "Create a subscription",
      "description": "Create a new subscription for the current user",
      "tags": ["Subscription"],
      "security": [
        {
          "cookieAuth": []
        }
      ],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": ["planId", "paymentMethodId"],
              "properties": {
                "planId": {
                  "type": "string",
                  "description": "ID of the subscription plan"
                },
                "paymentMethodId": {
                  "type": "string",
                  "description": "ID of the payment method to use"
                }
              }
            }
          }
        }
      },
      "responses": {
        "201": {
          "description": "Subscription created successfully",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "data": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "planId": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": ["ACTIVE", "PENDING"]
                      },
                      "startDate": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "endDate": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "autoRenew": {
                        "type": "boolean"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "400": {
          "description": "Invalid input",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "401": {
          "description": "Not authenticated",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "500": {
          "description": "Server error",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        }
      }
    }
  },
  "/api/subscriptions/invoices": {
    "get": {
      "summary": "Get user's invoices",
      "description": "Retrieve the current user's invoices",
      "tags": ["Subscription"],
      "security": [
        {
          "cookieAuth": []
        }
      ],
      "responses": {
        "200": {
          "description": "Invoices retrieved successfully",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "data": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "subscriptionId": {
                          "type": "string"
                        },
                        "amount": {
                          "type": "number",
                          "format": "float"
                        },
                        "currency": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": ["PAID", "UNPAID", "PENDING"]
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "paidAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "url": {
                          "type": "string",
                          "format": "uri"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "401": {
          "description": "Not authenticated",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "500": {
          "description": "Server error",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        }
      }
    }
  },
  "/api/subscriptions/payment-method/{customerId}": {
    "get": {
      "summary": "Get payment method",
      "description": "Retrieve payment method for a specific customer",
      "tags": ["Subscription"],
      "security": [
        {
          "cookieAuth": []
        }
      ],
      "parameters": [
        {
          "in": "path",
          "name": "customerId",
          "required": true,
          "schema": {
            "type": "string"
          },
          "description": "ID of the customer"
        }
      ],
      "responses": {
        "200": {
          "description": "Payment method retrieved successfully",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "data": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "brand": {
                        "type": "string",
                        "example": "VISA"
                      },
                      "last4": {
                        "type": "string",
                        "example": "1234"
                      },
                      "expMonth": {
                        "type": "integer",
                        "example": 12
                      },
                      "expYear": {
                        "type": "integer",
                        "example": 2025
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "401": {
          "description": "Not authenticated",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "404": {
          "description": "Payment method not found",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "500": {
          "description": "Server error",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        }
      }
    }
  },
  "/api/subscriptions/{subscriptionId}": {
    "delete": {
      "summary": "Cancel subscription",
      "description": "Cancel an existing subscription",
      "tags": ["Subscription"],
      "security": [
        {
          "cookieAuth": []
        }
      ],
      "parameters": [
        {
          "in": "path",
          "name": "subscriptionId",
          "required": true,
          "schema": {
            "type": "string"
          },
          "description": "ID of the subscription to cancel"
        }
      ],
      "responses": {
        "200": {
          "description": "Subscription canceled successfully",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "data": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": ["CANCELED"]
                      },
                      "endDate": {
                        "type": "string",
                        "format": "date-time"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "401": {
          "description": "Not authenticated",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "404": {
          "description": "Subscription not found",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "500": {
          "description": "Server error",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        }
      }
    }
  },
  "/api/subscriptions/{subscriptionId}/payment-method": {
    "patch": {
      "summary": "Update subscription payment method",
      "description": "Update the payment method for an existing subscription",
      "tags": ["Subscription"],
      "security": [
        {
          "cookieAuth": []
        }
      ],
      "parameters": [
        {
          "in": "path",
          "name": "subscriptionId",
          "required": true,
          "schema": {
            "type": "string"
          },
          "description": "ID of the subscription to update"
        }
      ],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": ["paymentMethodId"],
              "properties": {
                "paymentMethodId": {
                  "type": "string",
                  "description": "ID of the new payment method"
                }
              }
            }
          }
        }
      },
      "responses": {
        "200": {
          "description": "Payment method updated successfully",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "data": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "paymentMethod": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "brand": {
                            "type": "string",
                            "example": "VISA"
                          },
                          "last4": {
                            "type": "string",
                            "example": "4242"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "400": {
          "description": "Invalid input",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "401": {
          "description": "Not authenticated",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "404": {
          "description": "Subscription not found",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "500": {
          "description": "Server error",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        }
      }
    }
  },
  "/api/subscriptions/{subscriptionId}/swap-plan": {
    "patch": {
      "summary": "Swap subscription plan",
      "description": "Change the plan for an existing subscription",
      "tags": ["Subscription"],
      "security": [
        {
          "cookieAuth": []
        }
      ],
      "parameters": [
        {
          "in": "path",
          "name": "subscriptionId",
          "required": true,
          "schema": {
            "type": "string"
          },
          "description": "ID of the subscription to update"
        }
      ],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": ["newPlanVariationId", "squareCustomerId"],
              "properties": {
                "newPlanVariationId": {
                  "type": "string",
                  "description": "ID of the new subscription plan variation"
                },
                "squareCustomerId": {
                  "type": "string",
                  "description": "Square customer ID associated with the subscription"
                }
              }
            }
          }
        }
      },
      "responses": {
        "200": {
          "description": "Subscription plan swapped successfully",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "example": true
                  },
                  "data": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "planId": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": ["ACTIVE"]
                      },
                      "startDate": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "endDate": {
                        "type": "string",
                        "format": "date-time"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "400": {
          "description": "Invalid input",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "401": {
          "description": "Not authenticated",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "404": {
          "description": "Subscription not found",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        },
        "500": {
          "description": "Server error",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Error"
              }
            }
          }
        }
      }
    }
  }
}
